{"title":"Convert list of array/matrix into an array in R","markdown":{"yaml":{"title":"Convert list of array/matrix into an array in R","slug":"convert-list-of-array-matrix-into-an-array-in-r","author":"therimalaya","date":"2022-03-18","categories":["R"],"tags":["rstat","programming"]},"containsRefs":false,"markdown":"\n\n```{r setup, include = FALSE}\nknitr::opts_chunk$set(comment = NA, warning = FALSE, fig.align = \"center\", fig.asp = 0.7, out.width = \"100%\")\n```\n\nArray and matrix/tables are data structures in R with same data types such as numeric, string or boolean. This examples show how to convert a list of vector/matrix/array into a multi-dimentional array so that it will become easier to aggregate them in particular dimension. We can also do this converting everything into data frame but this way can be useful sometimes and is worth learning.\n\nLet us use a dataset already available in R and convert that into a list of tables or matrix. Here I will use `Titanic` dataset and convert it into a nested list of array using `purrr` package.\n\n```{r}\nlibrary(purrr)\ntitanic_list <- array_tree(Titanic, 4:3)\nstr(titanic_list)\n```\n\nFollowing function will convert this nested array into a multi-dimensional array.\n\n```{r}\nlist2array <- function(list, dnames.name = NULL) {\n  l2a <- function(l) {\n    do.call(abind::abind, append(l, list(rev.along = 0)))\n  }\n  while (is.list(list[[1]])) {\n    list <- map(list, l2a)\n  }\n  out <- l2a(list)\n  if (!is.null(dnames.name)) names(dimnames(out)) <- dnames.name\n  return(out)\n}\n```\n\nNow, testing the function we just created.\n\n```{r}\nNewTitanic <- list2array(titanic_list, dnames.name = names(dimnames(Titanic)))\nstr(NewTitanic)\n```\n\n```{r}\nidentical(Titanic, as.table(NewTitanic))\n```\n\n\n\n\n\n\n\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["lightbox"],"toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","fontsize":"1.2em","linestretch":1.75,"theme":{"light":["default","../../../light.scss","../../../styles.scss"],"dark":["default","../../../dark.scss","../../../styles.scss"]},"title-block-banner":false,"title":"Convert list of array/matrix into an array in R","slug":"convert-list-of-array-matrix-into-an-array-in-r","author":"therimalaya","date":"2022-03-18","categories":["R"],"tags":["rstat","programming"]},"extensions":{"book":{"multiFile":true}}}}}